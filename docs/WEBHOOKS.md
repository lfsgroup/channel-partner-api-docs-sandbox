<img src="../images/back.svg" alt="back" style="zoom:40%;" />[ Overview](./README.md)
![plot](./images/linkedin.png)

# Webhooks

## Overview
Use webhook subscriptions to receive events that occur in the system (eg [payments](PAYMENT_EVENTS.md) and [payouts](PAYOUT_EVENTS.md)). 

Partners that subscribe to events will receive event notifications, as HTTP POSTs, to the URL specified in the subscription.

## Event Subscriptions
Subscriptions can be managed using the webhook endpoints (below)

A GET request to [webhooks endpoint](../../reference/partner-openapispec.yaml/paths/~1api~1v3~1partner~1events~1topics/get) will return a list of available events:

### Managing Subscriptions
To receive events, expose a webhook and register it to receive events of one or more event types.

* [create webhook](../../reference/partner-openapispec.yaml/paths/~1api~1v3~1partner~1webhooks/post)
* [update webhook](../../reference/partner-openapispec.yaml/paths/~1api~1v3~1partner~1webhooks/put)
* [delete webhook](../../reference/partner-openapispec.yaml/paths/~1api~1v3~1partner~1webhooks/delete)
* [list webhooks](../../reference/partner-openapispec.yaml/paths/~1api~1v3~1partner~1webhooks/get)

<br />

---
<br />

## Replay events
Events that have been missed can be replayed via the /events/replay/{lastSeenEventID} endpoint.
The event list can be filtered, by searching on:
* Time, using the `since` parameter
* By `last seen event ID`, e.g. all events after a previous event id (TODO - see stripe example)
* Event delivery status, e.g. Webhooks with `failed` status

### Event Ordering
Order of events
FeeWise cannot guarantee delivery of events in the order in which they are generated. 
It is possible (however rare) that you may receive some events out of order. See [here](https://www.svix.com/blog/guaranteeing-webhook-ordering/) for more details.

<br />

---
<br />

## Event management / Correlation / Tracing
It is recommended that you set the `x-correlation-id` header on all API requests. 

If supplied, the `x-correlation-id` header will:
  * Be returned in all API responses (including webhook events) that were triggered by the client. 
  * allow clients to filter or ignore webhook events that your system has already processed.
  * allow easier resolution of issues between the client and server(s).

If `NOT` supplied, `x-correlation-id` will be generated by FeeWise and returned in all responses.

